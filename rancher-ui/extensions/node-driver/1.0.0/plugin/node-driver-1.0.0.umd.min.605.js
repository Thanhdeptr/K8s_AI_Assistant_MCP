(("undefined"!==typeof self?self:this)["webpackChunknode_driver_1_0_0"]=("undefined"!==typeof self?self:this)["webpackChunknode_driver_1_0_0"]||[]).push([[605],{9980:function(e,t,a){"use strict";a.d(t,{l:function(){return r.A}});var r=a(8023)},8170:function(e,t,a){"use strict";a.d(t,{A:function(){return u}});var r=a(9274);const n={key:0,class:"loading-indicator"},o={key:1};function i(e,t,a,i,s,l){const c=(0,r.resolveComponent)("t");return a.loading?((0,r.openBlock)(),(0,r.createElementBlock)("div",n,[s.showMessage?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:(0,r.normalizeClass)(["overlay",{"overlay-content-mode":"content"===a.mode,"overlay-main-mode":"main"===a.mode}])},[(0,r.createVNode)(c,{k:"generic.loading",raw:!0})],2)):(0,r.createCommentVNode)("",!0)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",o,[(0,r.renderSlot)(e.$slots,"default",{},void 0,!0)]))}var s={props:{loading:{type:Boolean,default:!0},mode:{type:String,default:"content"},noDelay:{type:Boolean,default:!1}},data(){return{timer:null,showMessage:this.noDelay}},mounted(){this.timer=setTimeout((()=>{this.showMessage=!0}),250)},beforeUnmount(){clearTimeout(this.timer)}},l=(a(7248),a(7433));const c=(0,l.A)(s,[["render",i],["__scopeId","data-v-477d91e6"]]);var u=c},7376:function(e,t,a){"use strict";a.r(t);var r=a(6758),n=a.n(r),o=a(6173),i=a.n(o),s=i()(n());s.push([e.id,".overlay[data-v-477d91e6]{align-items:center;background-color:var(--overlay-bg);display:flex;justify-content:center;position:absolute;bottom:0;top:0;left:0;right:0;text-align:center;z-index:51}.overlay-content-mode[data-v-477d91e6],.overlay-main-mode[data-v-477d91e6]{top:var(--header-height)}.overlay-content-mode[data-v-477d91e6]{left:calc(var(--nav-width))}",""]),t["default"]=s},5664:function(e,t,a){"use strict";a.d(t,{Mc:function(){return _},bB:function(){return s},eo:function(){return p},k$:function(){return n},m4:function(){return r},yx:function(){return i}});const r={PREFERENCE:"userpreference",SCHEMA_DEFINITION:"schemaDefinition"},n={APP:"app",AUTH_CONFIG:"authconfig",ETCD_BACKUP:"etcdbackup",CLUSTER:"cluster",CLUSTER_TOKEN:"clusterregistrationtoken",CLUSTER_ROLE_TEMPLATE_BINDING:"clusterroletemplatebinding",CLOUD_CREDENTIAL:"cloudcredential",FLEET_WORKSPACES:"fleetworkspace",GLOBAL_ROLE:"globalRole",GLOBAL_ROLE_BINDING:"globalRoleBinding",NODE_POOL:"nodePool",NODE:"node",PRINCIPAL:"principal",PROJECT:"project",PROJECT_ROLE_TEMPLATE_BINDING:"projectroletemplatebinding",SETTING:"setting",SPOOFED:{GROUP_PRINCIPAL:"group.principal"},ROLE_TEMPLATE:"roleTemplate",TOKEN:"token",USER:"user",KONTAINER_DRIVER:"kontainerDriver",NODE_DRIVER:"nodeDriver"},o="pod",i="schema",s="secret",l={DEPLOYMENT:"apps.deployment",CRON_JOB:"batch.cronjob",DAEMON_SET:"apps.daemonset",JOB:"batch.job",STATEFUL_SET:"apps.statefulset",REPLICA_SET:"apps.replicaset",REPLICATION_CONTROLLER:"replicationcontroller"},{DAEMON_SET:c,CRON_JOB:u,JOB:E,...d}=(l.DEPLOYMENT,l.CRON_JOB,l.DAEMON_SET,l.JOB,l.STATEFUL_SET,l.REPLICA_SET,l.REPLICATION_CONTROLLER,l.DAEMON_SET,l.REPLICA_SET,l.STATEFUL_SET,l.DEPLOYMENT,l),_={AUTH_CONFIG:"management.cattle.io.authconfig",CATALOG_TEMPLATE:"management.cattle.io.catalogtemplate",CLUSTER:"management.cattle.io.cluster",CLUSTER_ROLE_TEMPLATE_BINDING:"management.cattle.io.clusterroletemplatebinding",FEATURE:"management.cattle.io.feature",KONTAINER_DRIVER:"management.cattle.io.kontainerdriver",MULTI_CLUSTER_APP:"management.cattle.io.multiclusterapp",NODE:"management.cattle.io.node",NODE_DRIVER:"management.cattle.io.nodedriver",NODE_POOL:"management.cattle.io.nodepool",NODE_TEMPLATE:"management.cattle.io.nodetemplate",PROJECT:"management.cattle.io.project",PROJECT_ROLE_TEMPLATE_BINDING:"management.cattle.io.projectroletemplatebinding",ROLE_TEMPLATE:"management.cattle.io.roletemplate",SETTING:"management.cattle.io.setting",USER:"management.cattle.io.user",TOKEN:"management.cattle.io.token",GLOBAL_ROLE:"management.cattle.io.globalrole",GLOBAL_ROLE_BINDING:"management.cattle.io.globalrolebinding",PSA:"management.cattle.io.podsecurityadmissionconfigurationtemplate",MANAGED_CHART:"management.cattle.io.managedchart",USER_NOTIFICATION:"management.cattle.io.rancherusernotification",GLOBAL_DNS_PROVIDER:"management.cattle.io.globaldnsprovider",RKE_TEMPLATE:"management.cattle.io.clustertemplate",RKE_TEMPLATE_REVISION:"management.cattle.io.clustertemplaterevision",CLUSTER_PROXY_CONFIG:"management.cattle.io.clusterproxyconfig"},p="fleet-default"},240:function(e,t,a){"use strict";a.d(t,{A:function(){return M}});var r=a(4220),n=a(9274);const o={VERSION_RANCHER:"server-version",VERSION_CLI:"cli-version",VERSION_MACHINE:"machine-version",VERSION_HELM:"helm-version",CLI_URL:{DARWIN:"cli-url-darwin",WINDOWS:"cli-url-windows",LINUX:"cli-url-linux"},API_HOST:"api-host",CA_CERTS:"cacerts",HIDE_LOCAL_CLUSTER:"hide-local-cluster",AUTH_TOKEN_MAX_TTL_MINUTES:"auth-token-max-ttl-minutes",KUBECONFIG_GENERATE_TOKEN:"kubeconfig-generate-token",KUBECONFIG_DEFAULT_TOKEN_TTL_MINUTES:"kubeconfig-default-token-ttl-minutes",ENGINE_URL:"engine-install-url",ENGINE_ISO_URL:"engine-iso-url",FIRST_LOGIN:"first-login",INGRESS_IP_DOMAIN:"ingress-ip-domain",SERVER_URL:"server-url",RKE_METADATA_CONFIG:"rke-metadata-config",TELEMETRY:"telemetry-opt",EULA_AGREED:"eula-agreed",AUTH_USER_INFO_MAX_AGE_SECONDS:"auth-user-info-max-age-seconds",AUTH_USER_SESSION_TTL_MINUTES:"auth-user-session-ttl-minutes",AUTH_USER_INFO_RESYNC_CRON:"auth-user-info-resync-cron",AUTH_LOCAL_VALIDATE_DESC:"auth-password-requirements-description",PASSWORD_MIN_LENGTH:"password-min-length",CLUSTER_TEMPLATE_ENFORCEMENT:"cluster-template-enforcement",UI_INDEX:"ui-index",UI_DASHBOARD_INDEX:"ui-dashboard-index",UI_DASHBOARD_HARVESTER_LEGACY_PLUGIN:"ui-dashboard-harvester-legacy-plugin",UI_OFFLINE_PREFERRED:"ui-offline-preferred",SYSTEM_DEFAULT_REGISTRY:"system-default-registry",UI_ISSUES:"ui-issues",PL:"ui-pl",PL_RANCHER_VALUE:"rancher",SUPPORTED:"has-support",BANNERS:"ui-banners",ISSUES:"ui-issues",BRAND:"ui-brand",LOGO_LIGHT:"ui-logo-light",LOGO_DARK:"ui-logo-dark",BANNER_LIGHT:"ui-banner-light",BANNER_DARK:"ui-banner-dark",LOGIN_BACKGROUND_LIGHT:"ui-login-background-light",LOGIN_BACKGROUND_DARK:"ui-login-background-dark",PRIMARY_COLOR:"ui-primary-color",LINK_COLOR:"ui-link-color",COMMUNITY_LINKS:"ui-community-links",FAVICON:"ui-favicon",UI_PERFORMANCE:"ui-performance",UI_CUSTOM_LINKS:"ui-custom-links",UI_SUPPORTED_K8S_VERSIONS:"ui-k8s-supported-versions-range",THEME:"ui-theme",SYSTEM_NAMESPACES:"system-namespaces",CLUSTER_AGENT_DEFAULT_AFFINITY:"cluster-agent-default-affinity",FLEET_AGENT_DEFAULT_AFFINITY:"fleet-agent-default-affinity",ADD_EXTENSION_REPOS_BANNER_DISPLAY:"display-add-extension-repos-banner",AGENT_TLS_MODE:"agent-tls-mode",USER_RETENTION_CRON:"user-retention-cron",USER_RETENTION_DRY_RUN:"user-retention-dry-run",USER_LAST_LOGIN_DEFAULT:"user-last-login-default",DISABLE_INACTIVE_USER_AFTER:"disable-inactive-user-after",DELETE_INACTIVE_USER_AFTER:"delete-inactive-user-after"};o.CA_CERTS,o.ENGINE_URL,o.ENGINE_ISO_URL,o.PASSWORD_MIN_LENGTH,o.INGRESS_IP_DOMAIN,o.AUTH_USER_INFO_MAX_AGE_SECONDS,o.AUTH_USER_SESSION_TTL_MINUTES,o.AUTH_TOKEN_MAX_TTL_MINUTES,o.KUBECONFIG_GENERATE_TOKEN,o.KUBECONFIG_DEFAULT_TOKEN_TTL_MINUTES,o.AUTH_USER_INFO_RESYNC_CRON,o.SERVER_URL,o.RKE_METADATA_CONFIG,o.SYSTEM_DEFAULT_REGISTRY,o.UI_INDEX,o.UI_DASHBOARD_INDEX,o.UI_OFFLINE_PREFERRED,o.BRAND,o.CLUSTER_TEMPLATE_ENFORCEMENT,o.TELEMETRY,o.HIDE_LOCAL_CLUSTER,o.AGENT_TLS_MODE;var i=a(5664),s=a(6978);const l={};const c=function(e,t,a={}){const r=!0===a.parseJSON,n=!0===a.asCookie,o=!1!==a.asUserPreference,i=a.options,s=a.inheritFrom;return l[e]={def:t,options:i,parseJSON:r,asCookie:n,asUserPreference:o,inheritFrom:s,mangleRead:a.mangleRead,mangleWrite:a.mangleWrite},e},u=!0,E=!0,d=(c("cluster",""),c("last-namespace","")),_=(c("ns-by-cluster",{},{parseJSON:u}),c("workspace",""),c("open-groups",["cluster","policy","rbac","serviceDiscovery","storage","workload"],{parseJSON:u}),c("fav-type",[],{parseJSON:u}),c("pinned-clusters",[],{parseJSON:u}),c("group-by","namespace"),c("diff","unified",{options:["unified","split"]}),c("theme","auto",{options:["light","auto","dark"],asCookie:E,parseJSON:u,mangleRead:e=>e.replace(/^ui-/,""),mangleWrite:e=>`ui-${e}`}),c("pcs","",{asCookie:E,asUserPreference:!1}),c("locale","en-us",{asCookie:E}),c("keymap","sublime",{options:["sublime","emacs","vim"]}),c("per-page",100,{options:[10,25,50,100],parseJSON:u}),c("logs-wrap",!0,{parseJSON:u}),c("logs-time",!0,{parseJSON:u}),c("logs-range","30 minutes",{parseJSON:u}),c("hide-repos",[],{parseJSON:u}),c("hide-desc",[],{parseJSON:u}),c("hide-sensitive",!0,{options:[!0,!1],parseJSON:u}),c("show-pre-release",!1,{options:[!1,!0],parseJSON:u}),c("chart-mode","featured",{parseJSON:u}),c("date-format","ddd, MMM D YYYY",{options:["ddd, MMM D YYYY","ddd, D MMM YYYY","D/M/YYYY","M/D/YYYY","YYYY-MM-DD"]}),c("time-format","h:mm:ss a",{options:["h:mm:ss a","HH:mm:ss"]}),c("time-zone","local"),c("dev",!1,{parseJSON:u})),p=(c("view-in-api",!1,{parseJSON:u,inheritFrom:_}),c("all-namespaces",!1,{parseJSON:u,inheritFrom:_}),c("theme-shortcut",!1,{parseJSON:u,inheritFrom:_}),c("last-visited","home",{parseJSON:u}),c("seen-whatsnew","",{parseJSON:u}),c("read-whatsnew","",{parseJSON:u}),c("after-login-route","home",{parseJSON:u}),c("home-page-cards",{},{parseJSON:u}),c("plugin-developer",!1,{parseJSON:u,inheritFrom:_}),"rke1"),m="rke2";c("provisioner",m,{options:[p,m]}),c("scale-pool-prompt",null,{parseJSON:u});var N=a(9726),O=a(8851);a(2043);const h={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object","[object FileList]":"filelist"},{toString:T}=Object.prototype;function S(e){if(null===e)return"null";if(void 0===e)return"undefined";let t=h[T.call(e)]||"object";return"object"===t&&(e instanceof Error?t="error":e instanceof Date&&(t="date")),t}function R(e,t){const a=e-t;return(a>0)-(a<0)}const f={undefined:0,null:1,boolean:2,number:3,string:4,array:5,object:6,instance:7,function:8,class:9,date:10};function g(e,t){const a=S(e),r=S(t),n=R(f[a],f[r]);if(n)return n;switch(a){case"boolean":case"number":return R(e,t);case"string":return R(e.localeCompare(t),0);case"array":{const a=e.length,r=t.length,n=Math.min(a,r);for(let o=0;o<n;o++){const a=g(e[o],t[o]);if(0!==a)return a}return R(a,r)}case"date":return R(e.getTime(),t.getTime())}return 0}function A(e){const t=e.split(/:/);return 2===t.length&&"desc"===t[1]?{field:t[0],reverse:!0}:{field:e,reverse:!1}}function I(e,t,a){return Array.isArray(t)||(t=[t]),(e||[]).slice().sort(((e,r)=>{for(let n=0;n<t.length;n++){const o=A(t[n]),i=(0,s.Jt)(e,o.field),l=(0,s.Jt)(r,o.field);let c=g(i,l);if(c)return a&&(c*=-1),o.reverse&&(c*=-1),c}return 0}))}let L=1;const v="_beforeSaveHooks",C="_afterSaveHooks";var D={methods:{registerBeforeHook(e,t,a=99,r){this._registerHook(v,e,t,a,r)},unregisterBeforeSaveHook(e){this[v]=this[v].filter((t=>t.name!==e))},registerAfterHook(e,t,a=99,r){this._registerHook(C,e,t,a,r)},async applyHooks(e,...t){if(!e)throw new Error("Must specify key");const a=I(this[e]||[],["priority","name"]),r={};for(const n of a)console.debug("Applying hook",n.name),r[n.name]=await n.fn.apply(n.fnContext||this,t);return r},_registerHook(e,t,a,r,n){if(!e)throw new Error("Must specify key");a||(a=`hook_${L}`,L++),r||(r=99);let o=this[e];o||(o=[],this[e]=o);let i=(0,O.jq)(o,"name",a);i?(i.priority=r,i.fn=t,i.fnContext=n):(i={name:a,priority:r,fn:t,fnContext:n},o.push(i))}}};i.yx;async function U(e,t,a,r,n,o){const i=await n.dispatch(`${o}/cleanForDiff`,e,{root:!0}),l=await n.dispatch(`${o}/cleanForDiff`,t.toJSON(),{root:!0}),c=await n.dispatch(`${o}/cleanForDiff`,a.toJSON(),{root:!0}),u=(0,s.no)(i,c),E=(0,s.no)(i,l),d=(0,s.MA)(u,E);if(console.log("Background Change",u),console.log("User Change",E),console.log("Conflicts",d),t.metadata.resourceVersion=a.metadata.resourceVersion,(0,s.TJ)(t,u),d.length){const e=[r["i18n/t"]("validation.conflict",{fields:d.join(", "),fieldCount:d.length})];return e}return!1}var y={name:"CreateEditView",mixins:[D],data(){return{errors:[]}},computed:{isCreate(){return this.mode===r.YQ},isEdit(){return this.mode===r.G5},isView(){return this.mode===r.nW},schema(){const e=this.storeOverride||this.$store.getters["currentStore"](this.value.type);return this.$store.getters[`${e}/schemaFor`](this.value.type)},isNamespaced(){return this.schema?.attributes?.namespaced||!1},labels:{get(){return this.value?.labels},set(e){this.value.setLabels(e)}},annotations:{get(){return this.value?.annotations},set(e){this.value.setAnnotations(e)}},doneRoute(){if(this.value?.doneRoute)return this.value.doneRoute;let e=this.$route.name;return e?.endsWith("-id")?e=e.replace(/(-namespace)?-id$/,""):e?.endsWith("-create")&&(e=e.replace(/-create$/,"")),e},doneParams(){if(this.value?.doneParams)return this.value.doneParams;const e={...this.$route.params};return delete e.namespace,delete e.id,e}},methods:{done(){if(!this.doneEvent)return this.doneLocationOverride?this.$router.replace(this.doneLocationOverride):void(this.doneRoute&&this.$router.replace({name:this.doneRoute,params:this.doneParams||{resource:this.value.type}}));this.$emit("done")},async conflict(){return await U(this.initialValue.toJSON(),this.value,this.liveValue,this.$store.getters,this.$store,this.storeOverride||this.$store.getters["currentStore"](this.value.type))},async save(e,t,a=0){this.errors&&(0,O.IU)(this.errors);try{if(await this.applyHooks(v,this.value),this.value?.metadata?.labels&&0===Object.keys(this.value.metadata.labels||{}).length&&delete this.value.metadata.labels,this.value?.metadata?.annotations&&0===Object.keys(this.value.metadata.annotations||{}).length&&delete this.value.metadata.annotations,this.isCreate){const e=this.value?.metadata?.namespace;e&&e!==i.eo&&this.value.$dispatch("prefs/set",{key:d,value:e},{root:!0})}await this.actuallySave(t),this.$store.getters["type-map/isSpoofed"](this.value.type)&&await this.$store.dispatch("cluster/findAll",{type:this.value.type,opt:{force:!0}},{root:!0}),await this.applyHooks(C,this.value),e&&e(!0),this.done()}catch(r){if(409===r.status&&0===a&&this.isEdit){const r=await this.conflict();if(!1===r)return this.save(e,t,a+1);this.errors=r}else this.errors=(0,N.rz)(r);console.error("CreateEditView mixin failed to save: ",r),e&&e(!1)}},async actuallySave(e){if(this.isCreate){e=e||this.schema.linkFor("collection");const t=await this.value.save({url:e});t&&Object.assign(this.value,t)}else await this.value.save()},setErrors(e){this.errors=e}}},M=(0,n.defineComponent)({...y,props:{mode:{type:String,default:r.G5},realMode:{type:String,default:r.G5},as:{type:String,default:r.zD},value:{type:Object,required:!0},initialValue:{type:Object,default:null},liveValue:{type:Object,default:null},doneEvent:{type:Boolean,default:!1}}})},7248:function(e,t,a){var r=a(7376);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var n=a(4825).A;n("3eb3a738",r,!0,{sourceMap:!1,shadowMode:!1})},6471:function(e){"use strict";e.exports=JSON.parse('{"hasStylesheet":"true"}')},1862:function(e){"use strict";e.exports=JSON.parse('{"hasStylesheet":"false"}')},8401:function(e){"use strict";e.exports=JSON.parse('{"hasStylesheet":"false"}')},7259:function(e){"use strict";e.exports=JSON.parse('{"hasStylesheet":"true"}')}}]);
//# sourceMappingURL=node-driver-1.0.0.umd.min.605.js.map