{"version":3,"file":"node-driver-1.0.2.umd.min.cloud-credential.js","mappings":"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","sources":["webpack://node-driver-1.0.2/./openstack.ts","webpack://node-driver-1.0.2/./cloud-credential/openstack.vue","webpack://node-driver-1.0.2/../../node_modules/@rancher/shell/utils/url.ts","webpack://node-driver-1.0.2/./components/BusyButton.vue","webpack://node-driver-1.0.2/./components/BusyButton.vue?e18e","webpack://node-driver-1.0.2/./cloud-credential/openstack.vue?0264","webpack://node-driver-1.0.2/./cloud-credential/openstack.vue?0ca7","webpack://node-driver-1.0.2/./components/BusyButton.vue?653d","webpack://node-driver-1.0.2/./cloud-credential/openstack.vue?0db0","webpack://node-driver-1.0.2/./components/BusyButton.vue?a733"],"sourcesContent":["/**\n * Helper class for dealing with the Openstack API\n *\n * Openstack API Docs:\n *\n *  https://docs.openstack.org/api-ref/compute/index.html\n *\n */\nexport class Openstack {\n  public domainName: string = '';\n  public endpoint: string = '';\n  public projectDomainName: string = '';\n  public projectId: string = '';\n  public projectName: string = '';\n  public username: string = '';\n  public password: string = '';\n  public token: string = '';\n  public region: string = '';\n  private catalog: any;\n  private endpoints: any;\n  private userId: string = '';\n\n  private $dispatch: any;\n\n  public regionsFromCatalog: any[] = [];\n\n  constructor($store: any, obj: any) {\n    if (obj.annotations) {\n      Object.keys(obj.annotations).forEach((key) => {\n        const p = key.split('/');\n\n        if (p.length === 2 && p[0] === 'openstack.cattle.io') {\n          const field = p[1];\n\n          (this as any)[field] = obj.annotations[key];\n        }\n      });\n    } else {\n      // Copy from options to this\n      Object.keys(obj).forEach((key) => {\n        (this as any)[key] = obj[key];\n      });\n    }\n\n    this.$dispatch = $store.dispatch;\n  }\n\n  public async getToken() {\n    const endpoint = this.endpoint.replace(/^https?:\\/\\//, '');\n    const baseUrl = `/meta/proxy/${ endpoint }`;\n    const url = `${ baseUrl }/auth/tokens`;\n\n    const data = {\n      auth: {\n        identity: {\n          methods:  ['password'],\n          password: {\n            user: {\n              name:     this.username,\n              domain:   { name: this.domainName },\n              password: this.password\n            }\n          }\n        }\n      }\n    };\n\n    if (this.projectName) {\n      (data as any).auth.scope = {\n        project: {\n          name:   this.projectName,\n          domain: { name: this.projectDomainName }\n        }\n      };\n    }\n\n    const headers = { Accept: 'application/json' };\n\n    try {\n      const res = await this.$dispatch('management/request', {\n        url,\n        headers,\n        method:               'POST',\n        redirectUnauthorized: false,\n        data\n      }, { root: true });\n\n      if (res._status === 502) {\n        return { error: 'Could not proxy request - URL may not be in Rancher\\'s allow list' };\n      }\n\n      const token = res._headers['x-subject-token'];\n\n      this.token = token;\n\n      this.userId = res?.token?.user?.id;\n\n      this.regionsFromCatalog = [];\n\n      if ((data as any).auth.scope && res?.token) {\n        this.catalog = res.token.catalog;\n        this.endpoints = {};\n        this.catalog.forEach((service: any) => {\n          const iface = service.endpoints.find((svc: any) => svc.interface === 'public');\n\n          // Only use the interfaces for the region\n          if (iface && iface.region_id === this.region) {\n            this.endpoints[service.type] = iface.url;\n          }\n\n          if (iface && service.type === 'compute') {\n            if (!this.regionsFromCatalog.includes(iface.region_id)) {\n              this.regionsFromCatalog.push(iface.region_id);\n            }\n          }\n        });\n      }\n\n      this.regionsFromCatalog = this.regionsFromCatalog.map((id) => {\n        return { id }\n      });\n\n      return res;\n    } catch (e) {\n      console.error(e); // eslint-disable-line no-console\n\n      return { error: e };\n    }\n  }\n\n  public async getFlavors(value: any, initial?: string) {\n    return await this.getOptions(value, '/flavors', 'flavors', undefined, initial);\n  }\n\n  public async getImages(value: any, initial?: string) {\n    return await this.getOptions(value, '/images/detail', 'images', undefined, initial);\n  }\n\n  public async getKeyPairs(value: any, initial?: string) {\n    return await this.getOptions(value, '/os-keypairs', 'keypairs', (v: any) => v.keypair, initial);\n  }\n\n  public async getSecurityGroups(value: any, initial?: string) {\n    return await this.getOptions(value, '/os-security-groups', 'security_groups', undefined, initial);\n  }\n\n  public async getFloatingIpPools(value: any, initial?: string) {\n    return await this.getOptions(value, '/os-floating-ip-pools', 'floating_ip_pools', undefined, initial);\n  }\n\n  public async getNetworkNames(value: any, initial?: string) {\n    return await this.getOptions(value, '/os-tenant-networks', 'networks', (network: any) => {\n      return {\n        ...network,\n        name: network.label\n      };\n    }, initial);\n  }\n\n  public async getAvailabilityZones(value: any, initial?: string) {\n    return await this.getOptions(value, '/os-availability-zone', 'availabilityZoneInfo', (zone: any) => {\n      return {\n        ...zone,\n        name: zone.zoneName\n      };\n    }, initial);\n  }\n\n  public async getOptions(value: any, api: string, field: string, mapper?: Function, initial?: string) {\n    // We are fetching the data for the options\n    value.busy = true;\n    value.enabled = true;\n    value.selected = '';\n\n    const res = await this.makeComputeRequest(api);\n\n    if (res && (res as any)[field]) {\n      let list = (res as any)[field] || [];\n\n      if (mapper) {\n        list = list.map((k: any) => mapper(k));\n      }\n\n      value.options = this.convertToOptions(list);\n      value.busy = false;\n\n      if (initial) {\n        const found = value.options.find((option: any) => option.value.name === initial);\n\n        if (found) {\n          value.selected = found.value;\n        }\n      }\n\n      if (!value.selected && value.options.length > 0) {\n        value.selected = value.options[0].value;\n      }\n    } else {\n      value.options = [];\n      value.selected = null;\n      value.busy = false;\n      value.enabled = false;\n    }\n  }\n\n  public async makeComputeRequest(api: string) {\n    const endpoint = this.endpoints['compute'].replace(/^https?:\\/\\//, '');\n    const baseUrl = `/meta/proxy/${ endpoint }`;\n    const url = `${ baseUrl }${ api }`;\n\n    const headers = {\n      Accept:         'application/json',\n      'X-Auth-Token': this.token\n    };\n\n    try {\n      const res = await this.$dispatch('management/request', {\n        url,\n        headers,\n        method:               'GET',\n        redirectUnauthorized: false,\n      }, { root: true });\n\n      return res;\n    } catch (e) {\n      console.error(e); // eslint-disable-line no-console\n    }\n  }\n\n  public async getProjects() {\n    const endpoint = this.endpoint.replace(/^https?:\\/\\//, '');\n    const baseUrl = `/meta/proxy/${ endpoint }`;\n\n    const headers = {\n      Accept:         'application/json',\n      'X-Auth-Token': this.token\n    };\n\n    try {\n      const res = await this.$dispatch('management/request', {\n        url:                  `${ baseUrl }/users/${ this.userId }/projects`,\n        headers,\n        method:               'GET',\n        redirectUnauthorized: false,\n      }, { root: true });\n\n      return res?.projects;\n    } catch (e) {\n      console.error(e); // eslint-disable-line no-console\n\n      return { error: e };\n    }\n  }\n\n  public async getRegions() {\n    const endpoint = this.endpoint.replace(/^https?:\\/\\//, '');\n    const baseUrl = `/meta/proxy/${ endpoint }`;\n\n    const headers = {\n      Accept:         'application/json',\n      'X-Auth-Token': this.token\n    };\n\n    try {\n      const res = await this.$dispatch('management/request', {\n        url:                  `${ baseUrl }/regions`,\n        headers,\n        method:               'GET',\n        redirectUnauthorized: false,\n      }, { root: true });\n\n      return res?.regions;\n    } catch (e) {\n      console.error(e); // eslint-disable-line no-console\n\n      return { error: e };\n    }\n  }  \n\n  private convertToOptions(list: any) {\n    const sorted = (list || []).sort((a: any, b: any) => a.name.localeCompare(b.name));\n\n    return sorted.map((p: any) => {\n      return {\n        label: p.name,\n        value: p\n      };\n    });\n  }\n}\n","<script>\nimport Banner from '@components/Banner/Banner.vue';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { parse as parseUrl } from '@shell/utils/url';\nimport { _CREATE } from '@shell/config/query-params';\nimport BusyButton from '../components/BusyButton.vue';\nimport { Openstack } from '../openstack.ts';\n\nexport default {\n  components: {\n    Banner,\n    BusyButton,\n    LabeledInput,\n    LabeledSelect,\n  },\n\n  props: {\n    mode: {\n      type:     String,\n      required: true,\n    },\n\n    value: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  async fetch() {\n    this.driver = await this.$store.dispatch('rancher/find', {\n      type: 'nodedriver',\n      id:   'openstack'\n    });\n  },\n\n  data() {\n    if (this.mode !== _CREATE) {\n      this.value.decodedData.username = this.value.annotations['openstack.cattle.io/username'];\n      this.value.decodedData.domainName = this.value.annotations['openstack.cattle.io/domainName'];\n      this.value.decodedData.endpoint = this.value.annotations['openstack.cattle.io/endpoint'];\n    }\n\n    return {\n      projects:       null,\n      regions:        null,\n      step:           1,\n      busy:           false,\n      project:        '',\n      region:         '',\n      errorAllowHost: false,\n      driver:         {},\n      allowBusy:      false,\n      error:          '',\n    };\n  },\n\n  computed: {\n    projectOptions() {\n      const sorted = (this.projects || []).sort((a, b) => a.name.localeCompare(b.name));\n\n      return sorted.map((p) => {\n        return {\n          label: p.name,\n          value: p.id\n        };\n      });\n    },\n\n    regionOptions() {\n      const sorted = (this.regions || []).sort((a, b) => a.name.localeCompare(b.name));\n\n      return sorted.map((p) => {\n        return {\n          label: p.id,\n          value: p.id\n        };\n      });\n    },\n\n    hostname() {\n      const u = parseUrl(this.value.decodedData.endpoint);\n\n      return u?.host || '';\n    },\n\n    canAuthenticate() {\n      return !!this.value?.decodedData?.endpoint &&\n        !!this.value?.decodedData?.domainName &&\n        !!this.value?.decodedData?.username &&\n        !!this.value?.decodedData?.password;\n    }\n  },\n\n  created() {\n    this.$emit('validationChanged', false);\n  },\n\n  methods: {\n    // TODO: Validate that we can get a token for the project that the user has selected\n    test() {\n      // In the cluster creation flow, annotations is not set, so ensure it is set first\n      this.value.annotations = this.value.annotations || {};\n\n      this.value.annotations['openstack.cattle.io/username'] = this.value.decodedData.username;\n      this.value.annotations['openstack.cattle.io/domainName'] = this.value.decodedData.domainName;\n      this.value.annotations['openstack.cattle.io/endpoint'] = this.value.decodedData.endpoint;\n\n      const project = this.projects.find(p => p.id === this.project);\n\n      if (project) {\n        this.value.annotations['openstack.cattle.io/projectName'] = project.name;\n        this.value.annotations['openstack.cattle.io/projectId'] = project.id;\n        this.value.annotations['openstack.cattle.io/projectDomainName'] = project.domain_id;\n      }\n\n      if (this.region) {\n        this.value.annotations['openstack.cattle.io/region'] = this.region;\n      }\n\n      return true;\n    },\n\n    // When the user clicked 'Edit Auth Config', clear the projects and set the step back to 1\n    // so the user can modify the credentials needed to fetch the projects\n    clear() {\n      this.$set(this, 'step', 1);\n      this.$set(this, 'projects', null);\n      this.$set(this, 'errorAllowHost', false);\n\n      // Tell parent that the form is not invalid\n      this.$emit('validationChanged', false);\n    },\n\n    hostInAllowList() {\n      if (!this.driver?.whitelistDomains) {\n        return false;\n      }\n\n      const u = parseUrl(this.value.decodedData.endpoint);\n\n      if (!u.host) {\n        return true;\n      }\n\n      return (this.driver?.whitelistDomains || []).includes(u.host);\n    },\n\n    async addHostToAllowList() {\n      this.$set(this, 'allowBusy', true);\n      const u = parseUrl(this.value.decodedData.endpoint);\n\n      this.driver.whitelistDomains = this.driver.whitelistDomains || [];\n\n      if (!this.hostInAllowList()) {\n        this.driver.whitelistDomains.push(u.host);\n      }\n\n      try {\n        await this.driver.save();\n\n        this.$refs.connect.$el.click();\n      } catch (e) {\n        console.error('Could not update driver', e); // eslint-disable-line no-console\n        this.$set(this, 'allowBusy', false);\n      }\n    },\n\n    async connect(cb) {\n      this.$set(this, 'error', '');\n      this.$set(this, 'errorAllowHost', false);\n\n      let okay = false;\n\n      if (!this.value.decodedData.endpoint) {\n        return cb(okay);\n      }\n\n      const os = new Openstack(this.$store, {\n        endpoint:   this.value.decodedData.endpoint,\n        domainName: this.value.decodedData.domainName,\n        username:   this.value.decodedData.username,\n        password:   this.value.decodedData.password,\n      });\n\n      this.$set(this, 'allowBusy', false);\n      this.$set(this, 'step', 2);\n      this.$set(this, 'busy', true);\n\n      const res = await os.getToken();\n\n      if (res.error) {\n        console.error(res.error); // eslint-disable-line no-console\n        okay = false;\n\n        this.$set(this, 'step', 1);\n        this.$set(this, 'projects', null);\n\n        if (res.error._status === 502 && !this.hostInAllowList()) {\n          this.$set(this, 'errorAllowHost', true);\n        } else {\n          if (res.error._status === 502) {\n            // Still got 502, even with URL in the allow list\n            this.$set(this, 'error', this.t('driver.openstack.auth.errors.badGateway'));\n          } else if (res.error._status === 401) {\n            this.$set(this, 'error', this.t('driver.openstack.auth.errors.unauthorized'));\n          } else {\n            // Generic error\n            this.$set(this, 'error', res.error.message || this.t('driver.openstack.auth.errors.other'));\n          }\n        }\n      } else {\n        const projects = await os.getProjects();\n\n        if (!projects.error) {\n          this.$set(this, 'projects', projects);\n          okay = true;\n        } else {\n          this.$set(this, 'error', projects.error.message);\n        }\n\n        const regions = await os.getRegions();\n\n        if (!regions.error) {\n          this.$set(this, 'regions', regions);\n          okay = true;\n        } else {\n          // Could not list regions, so infer them from the project\n          const prj = this.projectOptions[0].value;\n          const project = this.projects.find(p => p.id === prj);\n\n          if (project) {\n            const osRegions = new Openstack(this.$store, {\n              ...os,\n              projectName: project.name,\n              projectId: project.id,\n              projectDomainName: project.domain_id\n            });\n\n            // Fetch a token with the project, so we get the endpoint catalog\n            await osRegions.getToken().then(() => {\n              this.$set(this, 'regions', osRegions.regionsFromCatalog);\n            });\n          }\n\n          // this.$set(this, 'error', regions.error.message || this.t('driver.openstack.auth.errors.regions'));\n        }\n      }\n      this.$set(this, 'busy', false);\n      this.$set(this, 'project', this.projectOptions[0]?.value);\n      this.$set(this, 'region', this.regionOptions[0]?.value);\n      this.$emit('validationChanged', okay);\n\n      cb(okay);\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"row\">\n      <div class=\"col span-6\">\n        <LabeledInput\n          :value=\"value.decodedData.endpoint\"\n          :disabled=\"step !== 1\"\n          label-key=\"driver.openstack.auth.fields.endpoint\"\n          placeholder-key=\"driver.openstack.auth.placeholders.endpoint\"\n          type=\"text\"\n          :mode=\"mode\"\n          @input=\"value.setData('endpoint', $event);\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledInput\n          :value=\"value.decodedData.domainName\"\n          :disabled=\"step !== 1\"\n          label-key=\"driver.openstack.auth.fields.domainName\"\n          placeholder-key=\"driver.openstack.auth.placeholders.domainName\"\n          type=\"text\"\n          :mode=\"mode\"\n          @input=\"value.setData('domainName', $event);\"\n        />\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col span-6\">\n        <LabeledInput\n          :value=\"value.decodedData.username\"\n          :disabled=\"step !== 1\"\n          class=\"mt-20\"\n          label-key=\"driver.openstack.auth.fields.username\"\n          placeholder-key=\"driver.openstack.auth.placeholders.username\"\n          type=\"text\"\n          :mode=\"mode\"\n          @input=\"value.setData('username', $event);\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledInput\n          :value=\"value.decodedData.password\"\n          :disabled=\"step !== 1\"\n          class=\"mt-20\"\n          label-key=\"driver.openstack.auth.fields.password\"\n          placeholder-key=\"driver.openstack.auth.placeholders.password\"\n          type=\"password\"\n          :mode=\"mode\"\n          @input=\"value.setData('password', $event);\"\n        />\n      </div>\n    </div>\n\n    <BusyButton\n      ref=\"connect\"\n      label-key=\"driver.openstack.auth.actions.authenticate\"\n      :disabled=\"step !== 1 || !canAuthenticate\"\n      class=\"mt-20\"\n      @click=\"connect\"\n    />\n\n    <button\n      class=\"btn role-primary mt-20 ml-20\"\n      :disabled=\"busy || step === 1\"\n      @click=\"clear\"\n    >\n      {{ t('driver.openstack.auth.actions.edit') }}\n    </button>\n\n    <Banner\n      v-if=\"error\"\n      class=\"mt-20\"\n      color=\"error\"\n    >\n      {{ error }}\n    </Banner>\n\n    <Banner\n      v-if=\"errorAllowHost\"\n      color=\"error\"\n      class=\"allow-list-error\"\n    >\n      <div>\n        {{ t('driver.openstack.auth.errors.notAllowed', { hostname }) }}\n      </div>\n      <button\n        :disabled=\"allowBusy\"\n        class=\"btn ml-10 role-primary\"\n        @click=\"addHostToAllowList\"\n      >\n        {{ t('driver.openstack.auth.actions.addToAllowList') }}\n      </button>\n    </Banner>\n    <div\n      v-if=\"projects\"\n      class=\"row mt-20\"\n    >\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-model=\"project\"\n          label-key=\"driver.openstack.auth.fields.project\"\n          :options=\"projectOptions\"\n          :searchable=\"false\"\n        />\n      </div>\n      <div\n        v-if=\"regions\"\n        class=\"col span-6\"\n      >\n        <LabeledSelect\n          v-model=\"region\"\n          label-key=\"driver.openstack.auth.fields.region\"\n          :options=\"regionOptions\"\n          :searchable=\"false\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n<style lang=\"scss\" scoped>\n  .allow-list-error {\n    display: flex;\n\n    > :first-child {\n      flex: 1;\n    }\n  }\n</style>\n","type UriField = 'source' | 'protocol' | 'authority' | 'userInfo' | 'user' | 'password' | 'host' | 'port' | 'relative' | 'path' | 'directory' | 'file' | 'queryStr' | 'anchor'\ntype UriFields = {\n  [key in UriField]: string; // eslint-disable-line no-unused-vars\n}\nexport type QueryParams = {\n  [key: string]: string\n}\n\ninterface ParsedUri extends UriFields {\n  query: QueryParams;\n}\n\nexport function addParam(url: string, key: string, val: string | string[]): string {\n  let out = url + (url.includes('?') ? '&' : '?');\n\n  // val can be a string or an array of strings\n  if ( !Array.isArray(val) ) {\n    val = [val];\n  }\n  out += val.map((v) => {\n    if ( v === null ) {\n      return `${ encodeURIComponent(key) }`;\n    } else {\n      return `${ encodeURIComponent(key) }=${ encodeURIComponent(v) }`;\n    }\n  }).join('&');\n\n  return out;\n}\n\nexport function addParams(url: string, params: QueryParams): string {\n  if ( params && typeof params === 'object' ) {\n    Object.keys(params).forEach((key) => {\n      url = addParam(url, key, params[key]);\n    });\n  }\n\n  return url;\n}\n\nexport function removeParam(url: string, key: string): string {\n  const parsed = parse(url);\n\n  if ( parsed.query?.[key] ) {\n    delete parsed.query[key];\n  }\n\n  return stringify(parsed);\n}\n\nexport function parseLinkHeader(str: string): Record<string, string> {\n  const out: { [key: string]: string} = { };\n  const lines = (str || '').split(',');\n\n  for ( const line of lines ) {\n    const match = line.match(/^\\s*<([^>]+)>\\s*;\\s*rel\\s*=\"(.*)\"/);\n\n    if ( match ) {\n      out[match[2].toLowerCase()] = match[1];\n    }\n  }\n\n  return out;\n}\n\nexport function isMaybeSecure(port: number, proto: string): boolean {\n  const protocol = proto.toLowerCase();\n\n  return portMatch([port], [443, 8443], ['443']) || protocol === 'https';\n}\n\nexport function portMatch(ports: number[], equals: number[], endsWith: string[]): boolean {\n  for (let i = 0; i < ports.length; i++) {\n    const port = ports[i];\n\n    if (equals.includes(port)) {\n      return true;\n    }\n\n    for (let j = 0; j < endsWith.length; j++) {\n      const suffix = `${ endsWith[j] }`;\n      const portStr = `${ port }`;\n\n      if (portStr !== suffix && portStr.endsWith(suffix)) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\n// parseUri 1.2.2\n// (c) Steven Levithan <stevenlevithan.com>\n// https://javascriptsource.com/parseuri/\n// MIT License\nexport function parse(str: string): ParsedUri {\n  const o = parse.options;\n  const m = o.parser[o.strictMode ? 'strict' : 'loose'].exec(str);\n\n  if (!m) {\n    throw new Error(`Cannot parse as uri: ${ str }`);\n  }\n  const uri = {} as ParsedUri;\n  let i = 14;\n\n  while (i--) {\n    uri[o.key[i]] = m[i] || '';\n  }\n\n  uri.query = {};\n  uri.queryStr.replace(o.q.parser, (_, $1: string, $2: string): string => {\n    if ($1) {\n      uri[o.q.name][$1] = $2;\n    }\n\n    return '';\n  });\n\n  return uri;\n}\n\nparse.options = {\n  strictMode: false,\n  key:        ['source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'queryStr', 'anchor'],\n  q:          {\n    name:   'query',\n    parser: /(?:^|&)([^&=]*)=?([^&]*)/g\n  },\n  parser: {\n    strict: /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,\n    loose:  /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/\n  }\n} as {\n  strictMode: boolean,\n  key: UriField[],\n  q: {\n    name: 'query',\n    parser: RegExp\n  },\n  parser: {\n    strict: RegExp,\n    loose: RegExp\n  }\n};\n\nexport function stringify(uri: ParsedUri): string {\n  let out = `${ uri.protocol }://`;\n\n  if ( uri.user && uri.password ) {\n    out += `${ uri.user }:${ uri.password }@`;\n  } else if ( uri.user ) {\n    out += `${ uri.user }@`;\n  }\n\n  out += uri.host;\n\n  if ( uri.port ) {\n    out += `:${ uri.port }`;\n  }\n\n  out += uri.path || '/';\n\n  out = addParams(out, uri.query || {});\n\n  if ( uri.anchor ) {\n    out += `#${ uri.anchor }`;\n  }\n\n  return out;\n}\n","<script>\nexport default {\n  props: {\n    /**\n     * Mode maps to keys in asyncButton.* translations\n     */\n    label: {\n      type:    String,\n      default: undefined,\n    },\n    labelKey: {\n      type:    String,\n      default: undefined,\n    },\n    disabled: {\n      type:    Boolean,\n      default: false,\n    },\n    tabIndex: {\n      type:    Number,\n      default: null,\n    },\n\n    /**\n     * Inherited global identifier prefix for tests\n     * Define a term based on the parent component to avoid conflicts on multiple components\n     */\n    componentTestid: {\n      type:    String,\n      default: 'busy-button'\n    },\n\n    manual: {\n      type:    Boolean,\n      default: false,\n    },\n  },\n\n  data() {\n    return { busy: false };\n  },\n\n  computed: {\n    displayLabel() {\n      if (this.labelKey) {\n        const t = this.$store.getters['i18n/t'];\n\n        return t(this.labelKey);\n      }\n\n      return this.label;\n    }\n  },\n\n  methods: {\n    clicked($event) {\n      if ($event) {\n        $event.stopPropagation();\n        $event.preventDefault();\n      }\n\n      if ( this.disabled ) {\n        return;\n      }\n\n      const cb = () => {\n        this.busy = false;\n      };\n\n      this.$set(this, 'busy', true);\n\n      this.$emit('click', cb);\n    },\n\n    focus() {\n      (this.$refs.btn).focus();\n    }\n  }\n};\n</script>\n\n<template>\n  <button\n    ref=\"btn\"\n    class=\"btn role-primary\"\n    :disabled=\"disabled\"\n    :tab-index=\"tabIndex\"\n    :data-testid=\"componentTestid + '-async-button'\"\n    @click=\"clicked\"\n  >\n    <i\n      v-if=\"busy\"\n      class=\"icon icon-lg icon-spinner icon-spin\"\n    />\n    <span\n      v-else\n      class=\"icon-spacer\"\n    />\n    <span>{{ displayLabel }}</span>\n    <span class=\"icon-spacer\" />\n  </button>\n</template>\n<style lang=\"scss\" scoped>\n  .icon-spacer {\n    width: 24px;\n  }\n</style>\n","import { render } from \"./BusyButton.vue?vue&type=template&id=79592bcc&scoped=true\"\nimport script from \"./BusyButton.vue?vue&type=script&lang=js\"\nexport * from \"./BusyButton.vue?vue&type=script&lang=js\"\n\nimport \"./BusyButton.vue?vue&type=style&index=0&id=79592bcc&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-79592bcc\"]])\n\nexport default __exports__","import { render } from \"./openstack.vue?vue&type=template&id=5b86ab48&scoped=true\"\nimport script from \"./openstack.vue?vue&type=script&lang=js\"\nexport * from \"./openstack.vue?vue&type=script&lang=js\"\n\nimport \"./openstack.vue?vue&type=style&index=0&id=5b86ab48&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5b86ab48\"]])\n\nexport default __exports__","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".allow-list-error[data-v-5b86ab48]{display:flex}.allow-list-error[data-v-5b86ab48]>:first-child{flex:1}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".icon-spacer[data-v-79592bcc]{width:24px}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./openstack.vue?vue&type=style&index=0&id=5b86ab48&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6f1a5784\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./BusyButton.vue?vue&type=style&index=0&id=79592bcc&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"47f1fb01\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"names":["Openstack","constructor","$store","obj","_defineProperty","annotations","Object","keys","forEach","key","p","split","length","field","this","$dispatch","dispatch","getToken","endpoint","replace","baseUrl","url","data","auth","identity","methods","password","user","name","username","domain","domainName","projectName","scope","project","projectDomainName","headers","Accept","res","method","redirectUnauthorized","root","_status","error","token","_headers","userId","id","regionsFromCatalog","catalog","endpoints","service","iface","find","svc","interface","region_id","region","type","includes","push","map","e","console","getFlavors","value","initial","getOptions","undefined","getImages","getKeyPairs","v","keypair","getSecurityGroups","getFloatingIpPools","getNetworkNames","network","label","getAvailabilityZones","zone","zoneName","api","mapper","busy","enabled","selected","makeComputeRequest","list","k","options","convertToOptions","found","option","getProjects","projects","getRegions","regions","sorted","sort","a","b","localeCompare","class","_createElementBlock","_createElementVNode","_hoisted_1","_hoisted_2","_createVNode","_component_LabeledInput","$props","decodedData","disabled","$data","step","mode","onInput","_cache","$event","setData","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_component_BusyButton","ref","$options","canAuthenticate","onClick","connect","args","clear","_ctx","t","_hoisted_7","_createBlock","_component_Banner","color","errorAllowHost","_toDisplayString","hostname","allowBusy","addHostToAllowList","_hoisted_8","_hoisted_9","_hoisted_10","_component_LabeledSelect","projectOptions","searchable","_hoisted_11","regionOptions","parse","str","o","m","parser","strictMode","exec","Error","uri","i","query","queryStr","q","_","$1","$2","strict","loose","tabIndex","componentTestid","clicked","displayLabel","props","String","default","labelKey","Boolean","Number","manual","computed","getters","stopPropagation","preventDefault","cb","$set","$emit","focus","$refs","btn","__exports__","components","Banner","BusyButton","LabeledInput","LabeledSelect","required","fetch","driver","_CREATE","u","parseUrl","host","created","test","domain_id","hostInAllowList","whitelistDomains","save","$el","click","okay","os","message","prj","osRegions","projectId","then","render","___CSS_LOADER_EXPORT___","module","content","__esModule","locals","exports","add"],"sourceRoot":""}